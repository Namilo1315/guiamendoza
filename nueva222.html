<!-- ====================== DESTACADOS CARRUSEL1 FIJO 3 CARDS ====================== -->
<section class="container mt-5">
  <div class="text-center mb-4">
    <h2 class="fw-bold text-primary">
      <i class="bi bi-star-fill text-warning me-2"></i> Comercios Destacados
    </h2>
    <p class="text-muted mb-0">Algunos de nuestros favoritos de la semana</p>
  </div>

  <div class="carrusel1-container overflow-hidden position-relative">
    <div class="carrusel1-track d-flex" id="featuredContainer">
      <!-- Cards se cargan con JS -->
    </div>
    <button class="carrusel1-btn prev btn btn-light position-absolute top-50 start-0 translate-middle-y">&#10094;</button>
    <button class="carrusel1-btn next btn btn-light position-absolute top-50 end-0 translate-middle-y">&#10095;</button>
  </div>
</section>

<style>
.carrusel1-container {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  overflow: hidden;
  position: relative;
}

.carrusel1-track {
  display: flex;
  transition: transform 0.5s linear;
}

.carrusel1-card {
  flex: 0 0 33.3333%; /* siempre 3 visibles */
  padding: 0 10px;
  box-sizing: border-box;
}

.carrusel1-card img {
  width: 100%;
  border-radius: 10px;
}
</style>

<script>
const FEATURED = [
  {
    nombre: "Panadería Sol",
    descripcion: "Panes y facturas artesanales",
    img: "https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1400&auto=format&fit=crop",
    rubro: "Panadería",
    whatsapp: "2611234567",
    direccion: "Calle 123, Maipú"
  },
  {
    nombre: "Ferretería El Tornillo",
    descripcion: "Herramientas y hogar",
    img: "https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1400&auto=format&fit=crop",
    rubro: "Ferretería",
    whatsapp: "2614455666",
    direccion: "Colón 101, Maipú"
  },
  {
    nombre: "Ferretería El Tornillo",
    descripcion: "Herramientas y hogar",
    img: "https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1400&auto=format&fit=crop",
    rubro: "Ferretería",
    whatsapp: "2614455666",
    direccion: "Colón 101, Maipú"
  },
  // Puedes agregar más aquí si quieres loop más largo
];

const featuredContainer = document.getElementById("featuredContainer");

// Función para crear card
function destacadoCard({nombre, descripcion, img, whatsapp, direccion}) {
  return `
    <div class="carrusel1-card">
      <div class="card card-hover h-100">
        <img src="${img}" class="card-img-top" alt="${nombre}">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title fw-bold text-primary">${nombre}</h5>
          <p class="card-text text-muted small">${descripcion||""}</p>
          <div class="mt-auto">
            <div class="d-flex align-items-start mb-3">
              <i class="bi bi-geo-alt-fill text-danger me-2 mt-1"></i>
              <div class="small">${direccion||"—"}</div>
            </div>
            <a href="https://wa.me/54${(whatsapp||"").replace(/\D/g,"")}" target="_blank" class="btn btn-success w-100 rounded-pill">
              <i class="bi bi-whatsapp me-1"></i> Contactar
            </a>
          </div>
        </div>
      </div>
    </div>
  `;
}

// Render + duplicado para loop infinito
function renderFeatured(){
  featuredContainer.innerHTML = FEATURED.map(destacadoCard).join("");
  FEATURED.forEach(f => featuredContainer.innerHTML += destacadoCard(f));
}
renderFeatured();

let index = 0;
const totalCards = FEATURED.length;

// Función para mover carrusel (3 visibles)
function moveCarousel(step = 1){
  index += step;
  if(index >= totalCards) index = 0;
  if(index < 0) index = totalCards - 1;
  featuredContainer.style.transform = `translateX(-${index * 33.3333}%)`;
}

// Botones
document.querySelector(".carrusel1-btn.prev").addEventListener("click", ()=> moveCarousel(-1));
document.querySelector(".carrusel1-btn.next").addEventListener("click", ()=> moveCarousel(1));

// Loop automático
setInterval(()=> moveCarousel(1), 3000);
</script>
